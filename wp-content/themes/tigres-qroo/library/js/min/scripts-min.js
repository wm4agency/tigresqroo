function updateViewportDimensions(){var e=window,o=document,i=o.documentElement,t=o.getElementsByTagName("body")[0];return{width:e.innerWidth||i.clientWidth||t.clientWidth,height:e.innerHeight||i.clientHeight||t.clientHeight}}function loadGravatars(){viewport=updateViewportDimensions(),viewport.width>=768&&jQuery(".comment img[data-gravatar]").each(function(){jQuery(this).attr("src",jQuery(this).attr("data-gravatar"))})}var cssua=function(e,o,i){var t=/\s*([\-\w ]+)[\s\/\:]([\d_]+\b(?:[\-\._\/]\w+)*)/,n=/([\w\-\.]+[\s\/][v]?[\d_]+\b(?:[\-\._\/]\w+)*)/g,r=/\b(?:(blackberry\w*|bb10)|(rim tablet os))(?:\/(\d+\.\d+(?:\.\w+)*))?/,s=/\bsilk-accelerated=true\b/,l=/\bfluidapp\b/,d=/(\bwindows\b|\bmacintosh\b|\blinux\b|\bunix\b)/,a=/(\bandroid\b|\bipad\b|\bipod\b|\bwindows phone\b|\bwpdesktop\b|\bxblwp7\b|\bzunewp7\b|\bwindows ce\b|\bblackberry\w*|\bbb10\b|\brim tablet os\b|\bmeego|\bwebos\b|\bpalm|\bsymbian|\bj2me\b|\bdocomo\b|\bpda\b|\bchtml\b|\bmidp\b|\bcldc\b|\w*?mobile\w*?|\w*?phone\w*?)/,p=/(\bxbox\b|\bplaystation\b|\bnintendo\s+\w+)/,c={parse:function(e,o){var i={};if(o&&(i.standalone=o),!(e=(""+e).toLowerCase()))return i;for(var n,c,f=e.split(/[()]/),u=0,x=f.length;u<x;u++)if(u%2){var b=f[u].split(";");for(n=0,c=b.length;n<c;n++)if(t.exec(b[n])){var m=RegExp.$1.split(" ").join("_"),h=RegExp.$2;(!i[m]||parseFloat(i[m])<parseFloat(h))&&(i[m]=h)}}else if(b=f[u].match(/([\w\-\.]+[\s\/][v]?[\d_]+\b(?:[\-\._\/]\w+)*)/g))for(n=0,c=b.length;n<c;n++)m=b[n].split(/[\/\s]+/),m.length&&"mozilla"!==m[0]&&(i[m[0].split(" ").join("_")]=m.slice(1).join("-"));return a.exec(e)?(i.mobile=RegExp.$1,r.exec(e)&&(delete i[i.mobile],i.blackberry=i.version||RegExp.$3||RegExp.$2||RegExp.$1,RegExp.$1?i.mobile="blackberry":"0.0.1"===i.version&&(i.blackberry="7.1.0.0"))):p.exec(e)?(i.game=RegExp.$1,n=i.game.split(" ").join("_"),i.version&&!i[n]&&(i[n]=i.version)):d.exec(e)&&(i.desktop=RegExp.$1),i.intel_mac_os_x?(i.mac_os_x=i.intel_mac_os_x.split("_").join("."),delete i.intel_mac_os_x):i.cpu_iphone_os?(i.ios=i.cpu_iphone_os.split("_").join("."),delete i.cpu_iphone_os):i.cpu_os?(i.ios=i.cpu_os.split("_").join("."),delete i.cpu_os):"iphone"!==i.mobile||i.ios||(i.ios="1"),i.opera&&i.version?(i.opera=i.version,delete i.blackberry):s.exec(e)?i.silk_accelerated=!0:l.exec(e)&&(i.fluidapp=i.version),i.edge&&(delete i.applewebkit,delete i.safari,delete i.chrome,delete i.android),i.applewebkit?(i.webkit=i.applewebkit,delete i.applewebkit,i.opr&&(i.opera=i.opr,delete i.opr,delete i.chrome),i.safari&&(i.chrome||i.crios||i.fxios||i.opera||i.silk||i.fluidapp||i.phantomjs||i.mobile&&!i.ios?(delete i.safari,i.vivaldi&&delete i.chrome):i.safari=i.version&&!i.rim_tablet_os?i.version:{419:"2.0.4",417:"2.0.3",416:"2.0.2",412:"2.0",312:"1.3",125:"1.2",85:"1.0"}[parseInt(i.safari,10)]||i.safari)):i.msie||i.trident?(i.opera||(i.ie=i.msie||i.rv),delete i.msie,delete i.android,i.windows_phone_os?(i.windows_phone=i.windows_phone_os,delete i.windows_phone_os):"wpdesktop"!==i.mobile&&"xblwp7"!==i.mobile&&"zunewp7"!==i.mobile||(i.mobile="windows desktop",i.windows_phone=9>+i.ie?"7.0":10>+i.ie?"7.5":"8.0",delete i.windows_nt)):(i.gecko||i.firefox)&&(i.gecko=i.rv),i.rv&&delete i.rv,i.version&&delete i.version,i},format:function(e){var o="",i;for(i in e)if(i&&e.hasOwnProperty(i)){var t=i,n=e[i],t=t.split(".").join("-"),r=" ua-"+t;if("string"==typeof n){for(var n=n.split(" ").join("_").split(".").join("-"),s=n.indexOf("-");0<s;)r+=" ua-"+t+"-"+n.substring(0,s),s=n.indexOf("-",s+1);r+=" ua-"+t+"-"+n}o+=r}return o},encode:function(e){var o="",i;for(i in e)i&&e.hasOwnProperty(i)&&(o&&(o+="&"),o+=encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return o}};return c.userAgent=c.ua=c.parse(o,i),o=c.format(c.ua)+" js",e.className=e.className?e.className.replace(/\bno-js\b/g,"")+o:o.substr(1),c}(document.documentElement,navigator.userAgent,navigator.standalone);!function(e){e.isScrollToFixed=function(o){return!!e(o).data("ScrollToFixed")},e.ScrollToFixed=function(o,i){function t(){g.trigger("preUnfixed.ScrollToFixed"),p(),g.trigger("unfixed.ScrollToFixed"),j=-1,_=g.offset().top,y=g.offset().left,m.options.offsets&&(y+=g.offset().left-g.position().left),-1==k&&(k=y),w=g.css("position"),h=!0,-1!=m.options.bottom&&(g.trigger("preFixed.ScrollToFixed"),d(),g.trigger("fixed.ScrollToFixed"))}function n(){var e=m.options.limit;return e?"function"==typeof e?e.apply(g):e:0}function r(){return"fixed"===w}function s(){return"absolute"===w}function l(){return!(r()||s())}function d(){if(!r()){var e=g[0].getBoundingClientRect();C.css({display:g.css("display"),width:e.width,height:e.height,float:g.css("float")}),cssOptions={"z-index":m.options.zIndex,position:"fixed",top:-1==m.options.bottom?f():"",bottom:-1==m.options.bottom?"":m.options.bottom,"margin-left":"0px"},m.options.dontSetWidth||(cssOptions.width=g.css("width")),g.css(cssOptions),g.addClass(m.options.baseClassName),m.options.className&&g.addClass(m.options.className),w="fixed"}}function a(){var e=n(),o=y;m.options.removeOffsets&&(o="",e-=_),cssOptions={position:"absolute",top:e,left:o,"margin-left":"0px",bottom:""},m.options.dontSetWidth||(cssOptions.width=g.css("width")),g.css(cssOptions),w="absolute"}function p(){l()||(j=-1,C.css("display","none"),g.css({"z-index":S,width:"",position:v,left:"",top:T,"margin-left":""}),g.removeClass("scroll-to-fixed-fixed"),m.options.className&&g.removeClass(m.options.className),w=null)}function c(e){e!=j&&(g.css("left",y-e),j=e)}function f(){var e=m.options.marginTop;return e?"function"==typeof e?e.apply(g):e:0}function u(){if(e.isScrollToFixed(g)&&!g.is(":hidden")){var o=h,i=l();h?l()&&(_=g.offset().top,y=g.offset().left):t();var u=e(window).scrollLeft(),w=e(window).scrollTop(),F=n();m.options.minWidth&&e(window).width()<m.options.minWidth?l()&&o||(b(),g.trigger("preUnfixed.ScrollToFixed"),p(),g.trigger("unfixed.ScrollToFixed")):m.options.maxWidth&&e(window).width()>m.options.maxWidth?l()&&o||(b(),g.trigger("preUnfixed.ScrollToFixed"),p(),g.trigger("unfixed.ScrollToFixed")):-1==m.options.bottom?F>0&&w>=F-f()?i||s()&&o||(b(),g.trigger("preAbsolute.ScrollToFixed"),a(),g.trigger("unfixed.ScrollToFixed")):w>=_-f()?(r()&&o||(b(),g.trigger("preFixed.ScrollToFixed"),d(),j=-1,g.trigger("fixed.ScrollToFixed")),c(u)):l()&&o||(b(),g.trigger("preUnfixed.ScrollToFixed"),p(),g.trigger("unfixed.ScrollToFixed")):F>0?w+e(window).height()-g.outerHeight(!0)>=F-(f()||-x())?r()&&(b(),g.trigger("preUnfixed.ScrollToFixed"),"absolute"===v?a():p(),g.trigger("unfixed.ScrollToFixed")):(r()||(b(),g.trigger("preFixed.ScrollToFixed"),d()),c(u),g.trigger("fixed.ScrollToFixed")):c(u)}}function x(){return m.options.bottom?m.options.bottom:0}function b(){var e=g.css("position");"absolute"==e?g.trigger("postAbsolute.ScrollToFixed"):"fixed"==e?g.trigger("postFixed.ScrollToFixed"):g.trigger("postUnfixed.ScrollToFixed")}var m=this;m.$el=e(o),m.el=o,m.$el.data("ScrollToFixed",m);var h=!1,g=m.$el,w,v,F,T,S,_=0,y=0,k=-1,j=-1,C=null,U,A,E=function(e){g.is(":visible")&&(h=!1,u())},O=function(e){window.requestAnimationFrame?requestAnimationFrame(u):u()},R=function(){var e=document.body;if(document.createElement&&e&&e.appendChild&&e.removeChild){var o=document.createElement("div");if(!o.getBoundingClientRect)return null;o.innerHTML="x",o.style.cssText="position:fixed;top:100px;",e.appendChild(o);var i=e.style.height,t=e.scrollTop;e.style.height="3000px",e.scrollTop=500;var n=o.getBoundingClientRect().top;e.style.height=i;var r=100===n;return e.removeChild(o),e.scrollTop=t,r}return null},z=function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1};m.init=function(){m.options=e.extend({},e.ScrollToFixed.defaultOptions,i),S=g.css("z-index"),m.$el.css("z-index",m.options.zIndex),C=e("<div />"),w=g.css("position"),v=g.css("position"),F=g.css("float"),T=g.css("top"),l()&&m.$el.after(C),e(window).bind("resize.ScrollToFixed",E),e(window).bind("scroll.ScrollToFixed",O),"ontouchmove"in window&&e(window).bind("touchmove.ScrollToFixed",u),m.options.preFixed&&g.bind("preFixed.ScrollToFixed",m.options.preFixed),m.options.postFixed&&g.bind("postFixed.ScrollToFixed",m.options.postFixed),m.options.preUnfixed&&g.bind("preUnfixed.ScrollToFixed",m.options.preUnfixed),m.options.postUnfixed&&g.bind("postUnfixed.ScrollToFixed",m.options.postUnfixed),m.options.preAbsolute&&g.bind("preAbsolute.ScrollToFixed",m.options.preAbsolute),m.options.postAbsolute&&g.bind("postAbsolute.ScrollToFixed",m.options.postAbsolute),m.options.fixed&&g.bind("fixed.ScrollToFixed",m.options.fixed),m.options.unfixed&&g.bind("unfixed.ScrollToFixed",m.options.unfixed),m.options.spacerClass&&C.addClass(m.options.spacerClass),g.bind("resize.ScrollToFixed",function(){C.height(g.height())}),g.bind("scroll.ScrollToFixed",function(){g.trigger("preUnfixed.ScrollToFixed"),p(),g.trigger("unfixed.ScrollToFixed"),u()}),g.bind("detach.ScrollToFixed",function(o){z(o),g.trigger("preUnfixed.ScrollToFixed"),p(),g.trigger("unfixed.ScrollToFixed"),e(window).unbind("resize.ScrollToFixed",E),e(window).unbind("scroll.ScrollToFixed",O),g.unbind(".ScrollToFixed"),C.remove(),m.$el.removeData("ScrollToFixed")}),E()},m.init()},e.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1e3,baseClassName:"scroll-to-fixed-fixed"},e.fn.scrollToFixed=function(o){return this.each(function(){new e.ScrollToFixed(this,o)})}}(jQuery),function(e,o){e.fn.nearest=function(i){function t(o){r=r?r.add(o):e(o)}var n,r,s,l,d,a=o.querySelectorAll;return this.each(function(){n=this,e.each(i.split(","),function(){if(l=e.trim(this),l.indexOf("#"))for(d=n.parentNode;d;){if(s=a?d.querySelectorAll(l):e(d).find(l),s.length){t(s);break}d=d.parentNode}else t(a?o.querySelectorAll(l):e(l))})}),r||e()}}(jQuery,document),jQuery(document).ready(function(e){e('a[href*="#"]').not('[href="#"]').not('[href="#0"]').click(function(o){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var i=e(this.hash);i=i.length?i:e("[name="+this.hash.slice(1)+"]"),i.length&&(o.preventDefault(),e("html, body").animate({scrollTop:i.offset().top},1e3,function(){var o=e(i);return o.focus(),!o.is(":focus")&&(o.attr("tabindex","-1"),void o.focus())}))}})});var viewport=updateViewportDimensions(),waitForFinalEvent=function(){var e={};return function(o,i,t){t||(t="Don't call this twice without a uniqueId"),e[t]&&clearTimeout(e[t]),e[t]=setTimeout(o,i)}}(),timeToWaitForLast=100;jQuery(document).ready(function($){loadGravatars(),viewport=updateViewportDimensions(),viewport.width>=768&&$("header.header").scrollToFixed()});